{
  "$schema": "./affim-ai.config.schema.json",
  "version": "0.2.0",
  "pdca": {
    "designDocPaths": [
      "docs/02-design/features/{content}.design.md"
    ],
    "planDocPaths": [
      "docs/01-plan/features/{content}.plan.md"
    ],
    "analysisDocPaths": [
      "docs/03-analysis/{content}.analysis.md"
    ],
    "outputPaths": [
      "PRODUCTION/{content}/"
    ],
    "mergeOutputFilename": "story.md",
    "statusFile": "docs/.pdca-status.json",
    "matchRateThreshold": 90,
    "autoIterate": true,
    "maxIterations": 5
  },
  "agents": {
    "taskBased": {
      "section writing": "section-writer",
      "gap analysis": "analyst",
      "iterate": "improver",
      "team": "leader",
      "project lead": "leader",
      "treatment generation": "story-designer"
    },
    "deprecated": {
      "content-orchestrator": "오케스트레이션 로직이 PDCA 스킬 Do phase로 이전됨 (계층 평탄화)"
    }
  },
  "templates": {
    "directory": "templates",
    "shared": {
      "plan": "shared/plan.template.md",
      "design": "shared/design.template.md",
      "analysis": "shared/analysis.template.md"
    }
  },
  "contentTypes": {
    "film": {
      "skills": ["kling3-prompt", "kling3-camera", "kling3-style", "kling3-examples", "suno-prompt", "suno-domain", "narration-script"],
      "templates": {
        "design": "templates/film/design.template.md",
        "output": ["templates/film/screenplay.template.md", "templates/film/sound-design.template.md"],
        "logline": "templates/film/logline.template.md",
        "treatment": "templates/film/treatment.template.md",
        "character": "templates/film/character.template.md"
      },
      "pipeline": ["film-logline", "film-treatment", "film-screenplay"],
      "sectionOffset": 3,
      "sectionFilePattern": "^(\\d{2})-section-(\\d+)\\.md$",
      "designPhaseSteps": [
        { "check": "PRODUCTION/{content}/01-logline.md", "create": "film-logline" },
        { "check": "PRODUCTION/{content}/02-treatment.md", "agent": "story-designer" },
        { "use": "design", "template": "film" }
      ],
      "mergeStrategy": {
        "sectionHeadingPattern": "^## Scene #\\d+",
        "storyMarker": "### 스토리",
        "stopMarker": "^### "
      },
      "validationProfile": {
        "rules": [
          "6-essential-elements",
          "character-consistency",
          "shot-duration",
          "total-time",
          "audio-sync",
          "negative-prompt",
          "template-structure",
          "narration-script-quality"
        ]
      }
    },
    "blog": {
      "skills": ["blog-writing", "blog-seo"],
      "templates": {
        "design": "templates/blog/design.template.md"
      },
      "sectionOffset": 0,
      "sectionFilePattern": "^(\\d{2})-section-(\\d+)\\.md$",
      "designPhaseSteps": [
        { "use": "design", "template": "blog", "askUser": ["blogType", "primaryKeyword", "targetPlatform"] }
      ],
      "mergeStrategy": {
        "extractFullContent": true
      },
      "validationProfile": {
        "rules": [
          "eeat-signals",
          "readability",
          "honorific-consistency",
          "seo-keyword-placement"
        ]
      }
    },
    "narration-video": {
      "skills": ["kling3-prompt", "kling3-camera", "kling3-style", "narration-script"],
      "templates": {
        "design": "templates/narration-video/design.template.md",
        "output": ["templates/narration-video/scene.template.md"]
      },
      "sectionOffset": 0,
      "sectionFilePattern": "^(\\d{2})-section-(\\d+)\\.md$",
      "designPhaseSteps": [
        { "use": "design", "template": "narration-video", "askUser": ["주제", "타겟감정", "이미지스타일선호"] }
      ],
      "mergeStrategy": {
        "sectionHeadingPattern": "^## Scene #\\d+",
        "storyMarker": "### 나레이션 스크립트",
        "stopMarker": "^### "
      },
      "validationProfile": {
        "rules": [
          "6-essential-elements",
          "negative-prompt",
          "template-structure",
          "narration-script-quality",
          "image-style-consistency"
        ]
      }
    }
  },
  "hooks": {
    "sessionStart": {
      "enabled": true,
      "timeout": 5000
    },
    "stop": {
      "enabled": true,
      "timeout": 5000
    },
    "userPromptSubmit": {
      "enabled": true,
      "timeout": 3000
    },
    "contextCompaction": {
      "enabled": true,
      "snapshotLimit": 10
    },
    "taskCompleted": {
      "enabled": true,
      "autoAdvance": true
    },
    "contentWritePre": {
      "enabled": true,
      "timeout": 3000
    },
    "contentWritePost": {
      "enabled": true,
      "timeout": 3000
    },
    "teammateIdle": {
      "enabled": false
    }
  },
  "automation": {
    "intentDetection": true,
    "ambiguityThreshold": 50,
    "supportedLanguages": ["en", "ko", "ja", "zh", "es", "fr", "de", "it"]
  },
  "context": {
    "defaultForkBehavior": "fork",
    "importCacheTTL": 30000,
    "hierarchyCacheTTL": 5000
  },
  "conventions": {
    "files": {
      "sections": "{NN}-section-{N}.md",
      "plan": "{content}.plan.md",
      "design": "{content}.design.md",
      "analysis": "{content}.analysis.md"
    },
    "characters": {
      "promptLabel": "@{name}",
      "displayName": "{name}",
      "rule": "promptLabel is used only inside AI generation prompts (Kling/Suno). displayName is used everywhere else."
    },
    "sectionNumbering": "1-based sequential",
    "contentNaming": "kebab-case"
  },
  "team": {
    "enabled": false,
    "displayMode": "in-process",
    "maxTeammates": 4,
    "leaderAgent": "leader",
    "orchestrationPatterns": {
      "plan": "leader",
      "design": "leader",
      "do": "swarm"
    }
  }
}
